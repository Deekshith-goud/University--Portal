<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explore Resources - VIGNANSYNC</title>
    <link rel="icon" type="image/png" href="/images/log-3.png" />
    
    <!-- Load Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&family=Caveat:wght@600;700&family=JetBrains+Mono:wght@400;700&family=Permanent+Marker&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <!-- Load Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Space Grotesk"', 'sans-serif'],
              hand: ['"Caveat"', 'cursive'],
              mono: ['"JetBrains Mono"', 'monospace'],
              marker: ['"Permanent Marker"', 'cursive'],
            },
            colors: {
              'vignan-yellow': '#FFD23F',
              'vignan-purple': '#6B4CDB',
              'vignan-pink': '#FF5D8F',
              'vignan-blue': '#3A86FF',
              'vignan-green': '#06D6A0',
              'paper': '#F9F7F1',
            },
            boxShadow: {
              'neo': '5px 5px 0px 0px rgba(0,0,0,1)',
              'neo-hover': '2px 2px 0px 0px rgba(0,0,0,1)',
              'neo-lg': '8px 8px 0px 0px rgba(0,0,0,1)',
            },
            animation: {
              'wiggle': 'wiggle 2s linear infinite',
            },
            keyframes: {
              wiggle: {
                '0%, 100%': { transform: 'rotate(-2deg)' },
                '50%': { transform: 'rotate(2deg)' },
              }
            }
          }
        }
      }
    </script>

    <style>
      body {
        background-color: #F9F7F1;
        background-image: 
          linear-gradient(#e5e7eb 1px, transparent 1px),
          linear-gradient(to right, #e5e7eb 1px, transparent 1px);
        background-size: 40px 40px;
        color: #1e293b;
      }

      /* Neo-Brutalist Card Base */
      .neo-card {
        background: white;
        border: 2px solid black;
        box-shadow: 5px 5px 0px 0px rgba(0,0,0,1);
        transition: all 0.2s ease;
      }
      .neo-card:hover {
        transform: translate(-2px, -2px);
        box-shadow: 7px 7px 0px 0px rgba(0,0,0,1);
      }
      .neo-card:active {
        transform: translate(2px, 2px);
        box-shadow: 2px 2px 0px 0px rgba(0,0,0,1);
      }

      /* Input Styles */
      .neo-input {
        width: 100%;
        padding: 12px;
        border: 2px solid black;
        font-family: 'JetBrains Mono', monospace;
        background: #fff;
        transition: all 0.2s;
      }
      .neo-input:focus {
        outline: none;
        background: #F9F7F1;
        box-shadow: 4px 4px 0px 0px #000;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar { width: 12px; }
      ::-webkit-scrollbar-track { background: #F9F7F1; border-left: 2px solid black; }
      ::-webkit-scrollbar-thumb { background: #6B4CDB; border: 2px solid black; }
    </style>
  </head>

  <body class="overflow-x-hidden">

    <!-- 1. NAVBAR (Consistent with Home) -->
    <nav class="fixed w-full z-50 bg-paper border-b-2 border-black">
      <div class="max-w-7xl mx-auto px-4 lg:px-8">
        <div class="flex justify-between items-center h-20">
          <a href="../index.html" class="flex items-center space-x-2 group">
            <div class="w-10 h-10 bg-black text-white flex items-center justify-center font-bold text-xl border-2 border-transparent group-hover:bg-vignan-yellow group-hover:text-black group-hover:border-black transition-colors">
              <img src="../images/log-3.png" class="h-6 w-6 object-contain filter invert group-hover:invert-0" alt="V" onerror="this.style.display='none';this.parentElement.innerHTML='V'">
            </div>
            <span class="text-2xl font-bold tracking-tight">VIGNAN<span class="text-vignan-purple">SYNC</span></span>
          </a>

          <!-- Desktop Menu -->
          <div class="hidden md:flex items-center space-x-8">
            <a href="../index.html" class="font-bold hover:text-vignan-purple hover:underline decoration-2 underline-offset-4 decoration-black">Home</a>
            <a href="explore-index.html" class="font-bold text-vignan-purple underline decoration-2 underline-offset-4 decoration-black">Explore</a>
            <a href="../announce.html" class="font-bold hover:text-vignan-purple hover:underline decoration-2 underline-offset-4 decoration-black">Announcements</a>
            
            <a href="../contact.html" class="neo-card px-6 py-2 bg-vignan-yellow font-bold text-black hover:bg-yellow-300">
              Get in Touch
            </a>
          </div>
        </div>
      </div>
    </nav>

    <main class="main-container pt-32 pb-20 max-w-7xl mx-auto px-4 lg:px-8">
      
      <!-- 2. HEADER: Messy Desk Style -->
      <section class="text-center mb-16 relative">
        <!-- Decoration -->
        <div class="absolute top-0 right-10 w-32 h-32 bg-vignan-pink rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
        <div class="absolute bottom-0 left-10 w-32 h-32 bg-vignan-blue rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>

        <h1 class="text-5xl lg:text-7xl font-bold mb-4 font-marker transform -rotate-1">
          Explore <span class="text-vignan-purple">Resources</span>
        </h1>
        <p class="text-xl font-mono bg-white border-2 border-black inline-block px-4 py-2 shadow-neo rotate-1">
          The central repository for all things academic.
        </p>
      </section>

      <!-- 3. IMPORTANT LINKS & DEPARTMENTS GRID -->
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 mb-16">
        
        <!-- Important Links (Sticker Style) -->
        <div class="col-span-1 lg:col-span-4 space-y-6">
            <div class="neo-card p-6 bg-vignan-yellow relative">
                <div class="absolute -top-3 -right-3 bg-black text-white px-2 font-mono text-xs rotate-3">MUST_READ</div>
                <h3 class="text-2xl font-bold mb-4 border-b-2 border-black pb-2">
                    <i class="fas fa-star mr-2"></i> Quick Links
                </h3>
                <div class="space-y-4">
                    <a href="../pdf's/Academic Calendar_HYD_2025-26.pdf" target="_blank" class="flex items-center gap-3 p-3 bg-white border-2 border-black hover:translate-x-1 hover:shadow-neo-hover transition-all">
                        <i class="fas fa-calendar-alt text-2xl"></i>
                        <span class="font-bold">Academic Calendar</span>
                    </a>
                    <a href="../pdf's/R22.1 Regulations for B.Tech.pdf" target="_blank" class="flex items-center gap-3 p-3 bg-white border-2 border-black hover:translate-x-1 hover:shadow-neo-hover transition-all">
                        <i class="fas fa-book text-2xl"></i>
                        <span class="font-bold">R22 Regulations</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Departments (Folder Tabs) -->
        <div class="col-span-1 lg:col-span-8">
            <div class="neo-card p-8 bg-white">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <i class="fas fa-graduation-cap mr-2 text-vignan-blue"></i> 
                    Department Archives
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- CSE -->
                    <a href="../explore/batch/CSE.html" class="group relative h-24 bg-gray-100 border-2 border-black hover:bg-vignan-blue hover:text-white transition-colors flex items-center justify-center overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-black group-hover:bg-white transition-colors"></div>
                        <span class="font-bold text-2xl font-mono">CSE</span>
                        <i class="fas fa-code absolute bottom-2 right-2 opacity-10 group-hover:opacity-30 text-4xl"></i>
                    </a>
                    <!-- AIML -->
                    <a href="../AIML.html" class="group relative h-24 bg-gray-100 border-2 border-black hover:bg-vignan-purple hover:text-white transition-colors flex items-center justify-center overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-black group-hover:bg-white transition-colors"></div>
                        <span class="font-bold text-2xl font-mono">AIML</span>
                        <i class="fas fa-brain absolute bottom-2 right-2 opacity-10 group-hover:opacity-30 text-4xl"></i>
                    </a>
                    <!-- ECE -->
                    <a href="../ECE.HTML" class="group relative h-24 bg-gray-100 border-2 border-black hover:bg-vignan-pink hover:text-white transition-colors flex items-center justify-center overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-black group-hover:bg-white transition-colors"></div>
                        <span class="font-bold text-2xl font-mono">ECE</span>
                        <i class="fas fa-microchip absolute bottom-2 right-2 opacity-10 group-hover:opacity-30 text-4xl"></i>
                    </a>
                    <!-- DS -->
                    <a href="../DS.html" class="group relative h-24 bg-gray-100 border-2 border-black hover:bg-vignan-yellow hover:text-black transition-colors flex items-center justify-center overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-black"></div>
                        <span class="font-bold text-2xl font-mono">DS</span>
                        <i class="fas fa-database absolute bottom-2 right-2 opacity-10 group-hover:opacity-30 text-4xl"></i>
                    </a>
                    <!-- CS -->
                    <a href="../CS.html" class="group relative h-24 bg-gray-100 border-2 border-black hover:bg-vignan-green hover:text-white transition-colors flex items-center justify-center overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-black group-hover:bg-white transition-colors"></div>
                        <span class="font-bold text-2xl font-mono">CS</span>
                        <i class="fas fa-shield-alt absolute bottom-2 right-2 opacity-10 group-hover:opacity-30 text-4xl"></i>
                    </a>
                    <!-- BT/BI -->
                    <a href="#" class="group relative h-24 bg-gray-100 border-2 border-black hover:bg-gray-800 hover:text-white transition-colors flex items-center justify-center overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-black group-hover:bg-white transition-colors"></div>
                        <span class="font-bold text-2xl font-mono">BT/BI</span>
                        <i class="fas fa-dna absolute bottom-2 right-2 opacity-10 group-hover:opacity-30 text-4xl"></i>
                    </a>
                </div>
            </div>
        </div>
      </div>

      <!-- 4. UPLOAD TERMINAL (The "Drop Zone") -->
      <div class="section-container mb-16">
        <div class="neo-card p-0 overflow-hidden">
            <!-- Window Header -->
            <div class="bg-black text-white p-4 flex justify-between items-center border-b-2 border-white">
                <div class="flex items-center gap-3">
                    <div class="flex gap-1.5">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <span class="font-mono text-sm">upload_protocol.exe</span>
                </div>
                <div class="font-mono text-xs opacity-50">Authorized Access Only</div>
            </div>

            <div class="p-8 bg-gray-50">
                <div class="mb-8 border-l-4 border-vignan-green pl-4">
                    <h3 class="text-2xl font-bold">Contribute Center</h3>
                    <p class="font-mono text-sm text-gray-600">Share your notes. Save a life (or a GPA).</p>
                </div>

                <form id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        
                        <!-- Student ID -->
                        <div class="form-group">
                            <label for="student_id" class="block font-bold mb-1 font-mono text-sm">>> Student_ID</label>
                            <input type="text" id="student_id" name="student_id" class="neo-input" placeholder="242FA0####" required />
                        </div>

                        <!-- Course -->
                        <div class="form-group">
                            <label for="course" class="block font-bold mb-1 font-mono text-sm">>> Target_Course</label>
                            <select id="course" name="course" class="neo-input cursor-pointer" required>
                                <option value="">[ SELECT COURSE ]</option>
                                <option value="CSE">CSE</option>
                                <option value="ECE">ECE</option>
                                <option value="AIML">AI-ML</option>
                                <option value="DS">DS</option>
                                <option value="CS">CS</option>
                                <option value="BT-BI">BT/BI</option>
                            </select>
                        </div>

                        <!-- Subject -->
                        <div class="form-group">
                            <label for="subject" class="block font-bold mb-1 font-mono text-sm">>> Subject_Name</label>
                            <input type="text" id="subject" name="subject" class="neo-input" placeholder="Ex: Data Structures" required />
                        </div>

                        <!-- Tag -->
                        <div class="form-group">
                            <label for="tag" class="block font-bold mb-1 font-mono text-sm">>> Note_Type</label>
                            <input type="text" id="tag" name="tag" class="neo-input" placeholder="Ex: Unit 1, Lab Manual" required />
                        </div>
                    </div>

                    <!-- Section Radio Buttons -->
                    <div class="mb-6 p-4 border-2 border-black border-dashed bg-white">
                        <label class="block font-bold mb-3 font-mono text-sm">>> Select_Section</label>
                        <div class="flex flex-wrap gap-4">
                            <label class="flex items-center gap-2 cursor-pointer bg-gray-100 px-3 py-1 border border-black hover:bg-vignan-yellow transition-colors">
                                <input type="radio" name="section" value="A" required class="accent-black"> <span class="font-bold">A</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer bg-gray-100 px-3 py-1 border border-black hover:bg-vignan-yellow transition-colors">
                                <input type="radio" name="section" value="B" class="accent-black"> <span class="font-bold">B</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer bg-gray-100 px-3 py-1 border border-black hover:bg-vignan-yellow transition-colors">
                                <input type="radio" name="section" value="C" class="accent-black"> <span class="font-bold">C</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer bg-gray-100 px-3 py-1 border border-black hover:bg-vignan-yellow transition-colors">
                                <input type="radio" name="section" value="D" class="accent-black"> <span class="font-bold">D</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer bg-gray-100 px-3 py-1 border border-black hover:bg-vignan-yellow transition-colors">
                                <input type="radio" name="section" value="Unique Section" class="accent-black"> <span class="font-bold">Unique</span>
                            </label>
                        </div>
                    </div>

                    <!-- File Upload -->
                    <div class="mb-8">
                        <label for="notes_file" class="block font-bold mb-2 font-mono text-sm">>> Attachment_Data</label>
                        <input type="file" id="notes_file" name="notes_file" class="block w-full text-sm text-slate-500
                          file:mr-4 file:py-2 file:px-4
                          file:border-2 file:border-black
                          file:text-sm file:font-bold
                          file:bg-vignan-pink file:text-white
                          hover:file:bg-black
                          cursor-pointer" required />
                    </div>

                    <button type="submit" class="w-full bg-black text-white font-bold text-lg py-4 border-2 border-black shadow-neo hover:translate-y-1 hover:shadow-none hover:bg-vignan-green hover:text-black transition-all">
                        <i class="fas fa-upload mr-2"></i> INITIATE UPLOAD
                    </button>
                </form>
            </div>
        </div>
      </div>

      <!-- 5. RECENT UPLOADS DISPLAY (Added this container so script works) -->
      <div id="notesList" class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Script will inject notes here -->
      </div>

    </main>

    <!-- FOOTER (Matching Index) -->
    <footer class="bg-black text-white py-16 border-t-4 border-vignan-green relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-full opacity-10 font-black text-9xl leading-none pointer-events-none whitespace-nowrap overflow-hidden select-none">
            EXPLORE EXPLORE EXPLORE
        </div>

        <div class="max-w-7xl mx-auto px-4 lg:px-8 grid md:grid-cols-2 gap-12 relative z-10">
            <div>
                <h3 class="text-5xl font-bold mb-4 font-mono">VIGNANSYNC</h3>
                <p class="font-mono text-gray-400 max-w-sm mb-8">
                    Knowledge is power. Sharing it is powerful.
                </p>
                <div class="flex space-x-6 font-bold text-lg">
                    <a href="#" class="hover:text-vignan-yellow underline decoration-wavy underline-offset-4">Privacy</a>
                    <a href="../contact.html" class="hover:text-vignan-yellow underline decoration-wavy underline-offset-4">Contact</a>
                </div>
            </div>

            <div class="bg-gray-900 p-6 border-2 border-gray-700 rounded-none shadow-neo-lg">
                <h4 class="font-mono font-bold text-vignan-green mb-4">> SUBSCRIBE_UPDATES</h4>
                <div class="flex gap-2">
                    <input type="email" placeholder="student@vignan.ac.in" class="bg-black border-2 border-gray-600 text-white p-3 w-full font-mono focus:border-vignan-green outline-none" />
                    <button class="bg-vignan-green text-black font-bold px-6 border-2 border-black hover:bg-white transition-colors">
                        ENTER
                    </button>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-12 pt-8 border-t border-gray-800 text-sm font-mono text-gray-500">
            &copy; 2025 VIGNANSYNC. All rights reserved.
        </div>
    </footer>

    <!-- Back to Top -->
    <button onclick="scrollToTop()" class="fixed bottom-8 right-8 bg-vignan-yellow text-black border-2 border-black w-12 h-12 flex items-center justify-center shadow-neo hover:translate-y-1 hover:shadow-none transition-all z-50">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
      // 1. Form Submission
      document.getElementById("uploadForm").addEventListener("submit", async function (event) {
          event.preventDefault();
          const formData = new FormData(event.target);

          try {
            const res = await fetch("/upload", { method: "POST", body: formData });
            const data = await res.json();

            if (data.error) {
              alert("Error: " + data.error);
            } else {
              alert(data.message);
              event.target.reset();
              loadNotes("CSE"); // Refresh list
            }
          } catch (err) {
            alert("Upload failed (Check console for details)");
            console.error(err);
          }
      });

      // 2. Load Notes Dynamically
      async function loadNotes(course) {
        try {
          const res = await fetch(`/notes/${course}`);
          const notes = await res.json();

          const container = document.getElementById("notesList");
          // Reset content
          container.innerHTML = `
            <div class="col-span-full mb-4">
                <h2 class="text-2xl font-bold font-mono border-b-2 border-black inline-block">
                    Received_Files [${course}]
                </h2>
            </div>`;

          notes.forEach((note) => {
            const div = document.createElement("div");
            div.className = "neo-card p-4 bg-white relative group";
            div.innerHTML = `
               <div class="absolute top-2 right-2 bg-black text-white text-xs px-2 py-1 font-mono">${note.tag}</div>
               <h4 class="font-bold text-lg mb-1 pr-16">${note.subject}</h4>
               <p class="font-mono text-xs text-gray-500 mb-4">Sec: ${note.section} | ID: ${note.student_id}</p>
               <a href="${note.file_url}" target="_blank" class="block text-center bg-gray-100 border-2 border-black py-2 font-bold hover:bg-vignan-blue hover:text-white transition-colors">
                 <i class="fas fa-eye mr-2"></i>View File
               </a>
             `;
            container.appendChild(div);
          });
        } catch (err) {
          console.log("Note loading bypassed (No backend active)");
        }
      }

      // Initial Load
      loadNotes("CSE");

      // 3. Scroll to Top
      function scrollToTop() {
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    </script>
  </body>
</html>